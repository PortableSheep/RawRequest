# Dynamic Environment Example
# RawRequest automatically detects and creates environments from @env declarations
# Any environment name you use in @env.{name}.{key} will appear in the dropdown!

###############################################################################
# CUSTOM ENVIRONMENTS - Define as many as you need!
###############################################################################

# Personal development environment
@env.personal.baseUrl http://localhost:8080
@env.personal.apiKey my-personal-dev-key
@env.personal.timeout 5000

# Client A environment
@env.clientA.baseUrl https://clienta-api.example.com
@env.clientA.apiKey client-a-production-key
@env.clientA.timeout 30000

# Client B environment
@env.clientB.baseUrl https://clientb-api.example.com
@env.clientB.apiKey client-b-production-key
@env.clientB.timeout 30000

# QA environment
@env.qa.baseUrl https://qa-api.example.com
@env.qa.apiKey qa-testing-key
@env.qa.timeout 60000

# Demo environment
@env.demo.baseUrl https://demo-api.example.com
@env.demo.apiKey demo-public-key
@env.demo.timeout 10000

# Integration testing
@env.integration.baseUrl http://integration-server:9000
@env.integration.apiKey integration-test-key
@env.integration.timeout 120000

###############################################################################
# GLOBAL VARIABLES
###############################################################################
@userId
@sessionToken

###############################################################################
# REQUESTS - Work with ANY environment!
###############################################################################

### Health Check
# This request will use whichever environment is selected in the dropdown
GET {{baseUrl}}/health
X-API-Key: {{apiKey}}

###

### Get User Data
GET {{baseUrl}}/api/users/123
X-API-Key: {{apiKey}}
Accept: application/json

###

### Create Resource
POST {{baseUrl}}/api/resources
Content-Type: application/json
X-API-Key: {{apiKey}}

{
  "name": "Test Resource",
  "environment": "Testing from RawRequest",
  "timestamp": "{{new Date().toISOString()}}"
}

###

###############################################################################
# ENVIRONMENT-SPECIFIC BEHAVIOR
###############################################################################

### Test with timeout
@name timeoutTest
GET {{baseUrl}}/api/slow-endpoint

> {
  console.log('Current environment timeout:', getVar('timeout'));
  console.log('Response time:', response.responseTime, 'ms');

  if (response.responseTime > parseInt(getVar('timeout') || '30000')) {
    console.warn('⚠️ Response exceeded environment timeout!');
  }
}

###

###############################################################################
# TIPS
###############################################################################
# 1. Add new environments just by using @env.{newName}.{key} {value}
# 2. They will automatically appear in the environment dropdown
# 3. Switch between environments in the header to test different configs
# 4. Each .http file can have its own set of custom environments
# 5. No more hardcoded environment lists - create what you need!
###############################################################################
